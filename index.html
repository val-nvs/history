<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>favorites</title>
	<style>
		* {
			margin: 0;
			padding: 0;
		}
		button {
			all: unset;
			cursor: crosshair;
		}
		body {
			background: #14181C;
			color: #fff;
		}
		
		header {
			background: #14181C;
			height: 90px;
			width: 100%;
			position: fixed;
			top: 0;
			left: 0;
			z-index: 1000;
		}
		
		.hero.active ~ header,
		body:has(.hero.active) header {
			opacity: 0;
			pointer-events: none;
		}
		
		main {
			background: #14181C url('grain-bg.png') repeat-x;
			margin-top: 90px;
			min-height: calc(100vh - 72px);
		}

		@font-face {font-family: 'everything'; src: url('everything.woff2') format('woff2');}
		@font-face {font-family: 'amelie'; src: url('amelie.otf') format('truetype');}
		@font-face {font-family: 'lily'; src: url('lily.woff2') format('woff2');}
		@font-face {font-family: 'humanist'; src: url('humanist.ttf') format('truetype');}


		.grid {
			background: rgba(0, 0, 0, 0);
			display: grid;
			width: calc(20rem * 4);
			grid-template-columns: repeat(4, 1fr);
			grid-template-rows: repeat(6, 1fr);
			margin: 0 auto;
			padding: 2rem 0;
		}
		.poster {
			background: rgba(0, 0, 0, .2);
			margin: 1rem;
			border-radius: 0.5rem;
			overflow: hidden;
			display: block;
			aspect-ratio: 2/3;
			box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.1);
		}
		.poster video, .poster img {
			width:100%;
			height: 100%;
			object-fit: cover;
			display: block;
		}
		.hero video, .hero img, .hero h1 {
			visibility: hidden;
			position: fixed;
			top: 0;
			left:0;
			width: 100vw;
			height: 100dvh;
			object-fit: cover;
			text-align: center;
		}
		.hero h1 {
			top: 50%;
			left: 50%;
			transform: translate(-50%, -40%);
			max-width: calc(100dvh * 9/16);
			font-size: calc(15dvh * 9/16);
			white-space: normal;
			word-wrap: break-word;
			text-align: center;
		}
		.hero.active video, .hero.active img, .hero.active h1 {
			visibility: visible;
		}

		#everything {font-family: everything, Arial, sans-serif;}
		#amelie {font-family: amelie, Arial, sans-serif;}
		#lily {font-family: lily, Arial, sans-serif;}
		#humanist {font-family: humanist, Arial, sans-serif;}

		.letter {opacity: 0}
		.letter.show {opacity: 1}

		#asdf {
			background-color: #f0f;
			opacity: .1;
			aspect-ratio: 9/16;
			height: 100dvh;
			position: fixed;
			top: 0;
			left: 50%;
			transform: translateX(-50%);
			object-fit: center;
		}

	</style>
</head>
<body>
	<header></header>
	<main>
		<div class="grid">
			<button class="poster" onclick="openHero('everything')">
				<img src="everything-poster.jpg"/>
				<video muted autoplay loop src="everything-poster.mp4"></video>
			</button>
			<button class="poster" onclick="openHero('amelie')">
				<img src="amelie-poster.jpg"/>
				<video muted autoplay loop src="amelie-poster.mp4"></video>
			</button>
			<button class="poster" onclick="openHero('love')">
				<video muted autoplay loop src="love-poster.mp4"></video>
				<img src="love-poster.jpg"/>
			</button>
			<button class="poster" onclick="openHero('lily')">
				<img src="lily-poster.jpg"/>
				<video muted autoplay loop src="lily-poster.mp4"></video>
			</button>
			<button class="poster" onclick="openHero('humanist')">
				<img src="humanist-poster.jpg"/>
				<video muted autoplay loop src="humanist-poster.mp4"></video>
			</button>
			<button class="poster" onclick="openHero('yiyi')">
				<img src="yiyi-poster.jpg"/>
				<video muted autoplay loop src="yiyi-poster.mp4"></video>
			</button>
			<button class="poster" onclick="openHero('angels')">
				<img src="angels-poster.jpg"/>
				<video muted autoplay loop src="angels-poster.mp4"></video>
			</button>
			<button class="poster" onclick="openHero('scott')">
				<img src="scott-poster.jpg"/>
				<video muted autoplay loop src="scott-poster.mp4"></video>
			</button>
			<button class="poster" onclick="openHero('mitty')">
				<img src="mitty-poster.jpg"/>
				<video muted autoplay loop src="mitty-poster.mp4"></video>
			</button>
			<button class="poster" onclick="openHero('cyborg')">
				<img src="cyborg-poster.jpg"/>
				<video muted autoplay loop src="cyborg-poster.mp4"></video>
			</button>
		</div>
	</main>

	<div class="hero" id="everything" onclick="closeHero()">
		<img src="everything-hero.jpg"></img>
		<video muted src="everything-hero.mp4"></video>
		<h1>Everything Everywhere All At Once * The Daniels</h1>
	</div>
	<div class="hero" id="amelie" onclick="closeHero()">
		<img src="amelie-hero.jpg"></img>
		<video muted src="amelie-hero.mp4"></video>
		<h1>Le Fabuleux Destin d'Amélie Poulain * Jean-Pierre Jeunet</h1>
	</div>
	<div class="hero" id="love" onclick="closeHero()">
		<img src="love-hero.jpg"></img>
		<video muted src="love-hero.mp4"></video>
		<h1>Love Exposure * Sion Sono</h1>
	</div>
	<div class="hero" id="lily" onclick="closeHero()">
		<img src="lily-hero.jpg"></img>
		<video muted src="lily-hero.mp4"></video>
		<h1>All About Lily Chou-Chou リリイ・シュシュのすべて * Shunji Iwai</h1>
	</div>
	<div class="hero" id="humanist" onclick="closeHero()">
		<img src="humanist-hero.jpg"></img>
		<video muted src="humanist-hero.mp4"></video>
		<h1>Vampire humaniste cherche suicidaire consentant * Ariane Louis-Seize</h1>
	</div>
	<div class="hero" id="yiyi" onclick="closeHero()">
		<img src="yiyi-hero.jpg"></img>
		<video muted src="yiyi-hero.mp4"></video>
		<h1>Yi Yi 一一 * Edward Yang</h1>
	</div>
	<div class="hero" id="angels" onclick="closeHero()">
		<img src="angels-hero.jpg"></img>
		<video muted src="angels-hero.mp4"></video>
		<h1>Yi Yi 一一 ^ Fallen Angels 墮落天使  * Wong Kar-wai</h1>
	</div>
	<div class="hero" id="scott" onclick="closeHero()">
		<img src="scott-hero.jpg"></img>
		<video muted src="scott-hero.mp4"></video>
		<h1>Scott Pilgrim vs. the World * Edgar Wright</h1>
	</div>

	<div class="hero" id="mitty" onclick="closeHero()">
		<img src="mitty-hero.jpg"></img>
		<video muted src="mitty-hero.mp4"></video>
		<h1>The Secret Life of Walter Mitty * Ben Stiller</h1>
	</div>

	<div class="hero" id="cyborg" onclick="closeHero()">
		<img src="cyborg-hero.jpg"></img>
		<video muted src="cyborg-hero.mp4"></video>
		<h1>I’m a Cyborg, But That’s OK 2006 싸이보그지만 괜찮아 * Park Chan-wook
</h1>
	</div>

	<!--<div id="asdf">hi</div>-->

<script>

	function splitLetters(h1) {
		const text = h1.textContent;
		h1.innerHTML = '';
		for (let char of text) {
			const span = document.createElement('span');
			span.className = 'letter';
			span.textContent = char;
			h1.appendChild(span);
		}

	}

	function showLettersRandomly(h1) {
    const letters = h1.querySelectorAll('.letter');
    const indices = [...Array(letters.length).keys()];
    
    // Shuffle array
    for (let i = indices.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [indices[i], indices[j]] = [indices[j], indices[i]];
    }
    
    // Show letters randomly
    indices.forEach((index, i) => {
        setTimeout(() => {
            letters[index].classList.add('show');
        }, i * 42);
    });

	}


	function openHero(heroId) {

		document.querySelectorAll('.hero').forEach(hero => hero.classList.remove('active'));

		const hero = document.getElementById(heroId);
		hero.classList.add('active');
		hero.querySelector('video').play();

		const h1 = hero.querySelector('h1');
		splitLetters(h1);
		setTimeout(() => showLettersRandomly(h1), 500);
	}

	function closeHero() {
		document.querySelectorAll('.hero').forEach(hero => hero.classList.remove('active'));
		document.querySelectorAll('.hero video').forEach(video => video.pause());
	}


</script>
</body>
</html>