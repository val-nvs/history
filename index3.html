<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>favorites</title>
	<style>
		* {
			margin: 0;
			padding: 0;
		}
		button {
			all: unset;
			cursor: crosshair;
		}
		body {
			background: #000;
			color: #fff;
		}

		@font-face {
			font-family: 'everything';
			src: url('everything.woff2') format('woff2');
		}
		@font-face {
			font-family: 'amelie';
			src: url('amelie.otf') format('truetype');
		}


		.grid {
			background: #111;
			display: grid;
			width: 1000px;
			grid-template-columns: repeat(3, 1fr);
			grid-template-rows: repeat(6, 1fr);
		}
		.poster {
			background: #222;
			margin: 1rem;
		}
		video {
			width:100%;
		}
		.hero video, .hero img, .hero h1 {
			visibility: hidden;
			position: fixed;
			top: 0;
			left:0;
			width: 100vw;
			height: 100dvh;
			object-fit: cover;
			text-align: center;
		}
		.hero h1 {
			top: 0%;
			max-width: 99vw;
			font-size: 14rem;
			white-space: normal;
			word-wrap: break-word;
			text-align: center;
		}
		.hero.active video, .hero.active img, .hero.active h1 {
			visibility: visible;
		}

		#everything {font-family: everything, Arial, sans-serif;}
		#amelie {font-family: amelie, Arial, sans-serif;}

		.letter {opacity: 0}
		.letter.show {opacity: 1}

	</style>
</head>
<body>
	<div class="grid">
		<button class="poster" onclick="openHero('everything')">
			<video muted autoplay loop src="everything-poster.mp4"></video>
		</button>
		<button class="poster" onclick="openHero('amelie')">
			<video muted autoplay loop src="amelie-poster.mp4"></video>
		</button>
		<button class="poster" onclick="openHero('love')">
			<video muted autoplay loop src="love-poster.mp4"></video>
		</button>
		<button class="poster">D</button>
		<button class="poster">E</button>
		<button class="poster">F</button>
	</div>
	<div class="hero" id="everything" onclick="closeHero()">
		<img src="everything-hero.jpg"></img>
		<video muted src="everything-hero.mp4"></video>
		<h1>Everything Everywhere All At Once (2022) Dir.: The Daniels</h1>
	</div>
	<div class="hero" id="amelie" onclick="closeHero()">
		<img src="amelie-hero.jpg"></img>
		<video muted src="amelie-hero.mp4"></video>
		<h1>Le Fabuleux Destin d'Am√©lie Poulain (2001) Dir.: Jean-Pierre Jeunet</h1>
	</div>
	<div class="hero" id="love" onclick="closeHero()">
		<img src="love-hero.jpg"></img>
		<video muted src="love-hero.mp4"></video>
		<h1>Love Exposure (2008) Dir.: Sion Sono</h1>
	</div>

<script>

	function splitLetters(h1) {
		const text = h1.textContent;
		h1.innerHTML = '';
		for (let char of text) {
			const span = document.createElement('span');
			span.className = 'letter';
			span.textContent = char === ' ' ? '\u00a0' : char;
			h1.appendChild(span);
		}

	}

	function showLettersRandomly(h1) {
    const letters = h1.querySelectorAll('.letter');
    const indices = [...Array(letters.length).keys()];
    
    // Shuffle array
    for (let i = indices.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [indices[i], indices[j]] = [indices[j], indices[i]];
    }
    
    // Show letters randomly
    indices.forEach((index, i) => {
        setTimeout(() => {
            letters[index].classList.add('show');
        }, i * 42);
    });

	}


	function openHero(heroId) {

		document.querySelectorAll('.hero').forEach(hero => hero.classList.remove('active'));

		const hero = document.getElementById(heroId);
		hero.classList.add('active');
		hero.querySelector('video').play();

		const h1 = hero.querySelector('h1');
		splitLetters(h1);
		setTimeout(() => showLettersRandomly(h1), 500);
	}

	function closeHero() {
		document.querySelectorAll('.hero').forEach(hero => hero.classList.remove('active'));
		document.querySelectorAll('.hero video').forEach(video => video.pause());
	}


</script>
</body>
</html>